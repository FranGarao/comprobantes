<div class="list-ctn">
    <h2>Lista de Comprobantes</h2>
    <div class="search-bar">
        <div class="search-container">
            <input #searchInput type="text" class="search" placeholder="Buscar por nombre">
            <button (click)="search(searchInput.value)" class="search-btn">
                <mat-icon>search</mat-icon>
            </button>
        </div>
        <div class="filter-container">
            <label for="status-filter">Filtrar</label>
            <select (change)="filter($event.target)" id="status-filter" class="status-filter">
                <option value="all">Todos</option>
                <option value="pendiente">Pendientes</option>
                <option value="finalizado">Finalizados</option>
            </select>
        </div>
    </div>
    <div class="invoices-ctn">
        @if (invoices.length > 0) {
        <div *ngFor="let invoice of filteredInvoices" class="invoice-card">
            <div class="invoice-header">
                <h3>Comprobante N°{{invoice?.id}}</h3>
                <p>Cliente: <strong>{{invoice?.name}}</strong></p>
                <p>Telefono: <strong>{{invoice?.phone}}</strong></p>
            </div>
            <div class="invoice-body">
                <p><span class="label">Trabajo:</span> {{invoice?.job}}</p>
                <p><span class="label">Total:</span> ${{invoice?.total}}</p>
                <p><span class="label">Seña:</span> ${{invoice?.deposit}}</p>
                <p><span class="label">Balance:</span> ${{invoice?.balance}}</p>
                <p><span class="label">Fecha de entrega:</span> {{invoice?.deliveryDate}}</p>
                <p>
                    <span class="label">Estado:</span>
                    <span class="status" [ngClass]="{'pending': !invoice?.status, 'finish': invoice?.status}">
                        {{ invoice?.status ? 'Terminado' : 'Pendiente' }}
                    </span>
                </p>
            </div>
            <div class="invoice-footer">
                <button *ngIf="!invoice?.status" (click)="finishInvoice(invoice)"
                    class="finalize-btn">Finalizar</button>
            </div>
        </div>
        }
    </div>
</div>